<#
    Command-line interface to oath-login REST function
    Author: Pete Jansz
#>

param
(
    [string]$USERNAME,
    [string]$PASSWORD,
    [string]$hostname,
    [int]$port,
    [switch]$help,
    [switch]$h
)

Set-PSDebug -Off #Trace 2

function showHelp()
{
    Write-Host "USAGE: oath-login -username <username> -password <password> -hostname <hostname> -port <port>"
    exit 1
}

if ($h -or $help) {showHelp}
if (-not($USERNAME)) {showHelp}
if (-not($PASSWORD)) {showHelp}
if (-not($hostname)) {showHelp}
if (-not($port))     {showHelp}

. lib-register-ca-player.ps1

execRestOauthLogin $hostname $port $username $password
