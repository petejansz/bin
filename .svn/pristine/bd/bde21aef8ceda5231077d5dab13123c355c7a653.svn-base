var http = require( "http" );
var myArgs = process.argv.slice( 2 )
var jsonBodyFilename = myArgs[0];
var jsonBody = require( jsonBodyFilename );
var hostname = 'localhost';
var port = 8180;
var playerId = "1000004367"

jsonBody.transactionIdBase = '4b864fc7-d229-40aa-9d00-8c6ea3cacd32';

var options = {
  "method": "POST",
  "hostname": "",
  "port": 80,
  "path": "/california/api/v1/processes/update-player-data",
  "headers": {
    "x-player-id": -1,
    "x-site-id": "35",
    "x-channel-id": "2",
    "x-ex-system-id": "8",
    "x-client-id": "156.24.141.217",
    "x-unique-id": "V6Cypgr-Um0AAAdzZasdcvbdsb",
    "content-type": "application/json;charset=UTF-8",
    "accept-language": "en-US,en;q=0.8,mt;q=0.6",
    "accept-encoding": "gzip, deflate, br",
    "accept": "application/json, text/javascript, */*; q=0.01",
    "cache-control": "no-cache",
  }
};

options.hostname = hostname;
options.port = port;
options.playerId = playerId;

var req = http.request( options, function ( res )
{
  var chunks = [];

  res.on( "data", function ( chunk )
  {
    chunks.push( chunk );
  } );

  res.on( "end", function ()
  {
    var responseBodyBuffer = Buffer.concat( chunks );
    var responseBodyStr = responseBodyBuffer.toString();
    var responseBodyJSON = JSON.parse( responseBodyStr );
    console.log( 'errorEncountered: ' + responseBodyJSON.errorEncountered );
  } );
} );

req.write( JSON.stringify( jsonBody ) );
req.end();