var http = require( "http" );
var lib1 = require("lib1");

var hostname = 'localhost';
var port = 8180;
var playerId = "1000004379"
var siteID = 35;
var systemId = 8;
var channelId = 2;

var jsonBody =
    {
        "callerChannelId": 2,
        "callingClientId": "156.24.141.217",
        "callerSystemId": 8,
        "transactionIdBase": "4b864fc7-d229-40aa-9d00-8e6ea3cace50",
        "transactionTime": 1498144861990,
        "siteID": 35,
        "playerId": -1
    };

jsonBody.playerId = playerId;
jsonBody.transactionIdBase = lib1.generateUUID();
jsonBody.callerChannelId = channelId;
jsonBody.callerSystemId = systemId;
jsonBody.siteID = siteID;

var options = {
    "method": "POST",
    "hostname": "localhost",
    "port": 80,
    "path": "/california/api/v1/processes/account-activation-mail",
    "headers": {
        "x-player-id": -1,
        "x-site-id": "35",
        "x-channel-id": "2",
        "x-ex-system-id": "8",
        "x-client-id": "156.24.141.217",
        "x-unique-id": "V6Cypgr-Um0AAAdzZasdcvbdsc",
        "content-type": "application/json;charset=UTF-8",
        "accept-language": "en-US,en;q=0.8,mt;q=0.6",
        "accept-encoding": "gzip, deflate, br",
        "accept": "application/json, text/javascript, */*; q=0.01",
        "cache-control": "no-cache",
    }
};

options.hostname = hostname;
options.port = port;
options.playerId = playerId;

var req = http.request( options, function ( res )
{
    var chunks = [];

    res.on( "data", function ( chunk )
    {
        chunks.push( chunk );
    } );

    res.on( "end", function ()
    {
        var body = Buffer.concat( chunks );
        console.log( body.toString() );
    } );
} );

req.write( JSON.stringify( jsonBody ) );
req.end();